{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}PeerLearn - Connect with Expert Mentors{% endblock %}

{% block content %}
<!-- Modern Hero Section - Inspired by Ed-Circle -->
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-heading">
            {% trans "Learn with" %}<br>
            <span class="text-primary">{% trans "Expert Anytime" %}</span><br>
            {% trans "Anywhere" %}
        </h1>
        
        <p class="hero-subtitle">
            {% trans "Connect with top mentors through live 1-on-1 video sessions. Master new skills and advance your career through personalized guidance." %}
        </p>
        
        <div class="hero-cta">
            <a href="{% url 'session_list' %}" class="btn btn-primary btn-lg">
                {% trans "Get Started" %}
            </a>
            <a href="{% url 'role_selection' %}" class="btn btn-outline btn-lg">
                {% trans "Become a Mentor" %}
            </a>
        </div>
        
        <div class="platform-partners mt-10">
            <div class="text-sm text-gray-500 mb-3">{% trans "Trusted by professionals from" %}</div>
            <div class="flex flex-wrap items-center gap-6">
                <span class="text-gray-700 font-semibold">Udemy</span>
                <span class="text-gray-700 font-semibold">UDACITY</span>
                <span class="text-gray-700 font-semibold">coursera</span>
                <span class="text-gray-700 font-semibold">Khan Academy</span>
            </div>
        </div>
    </div>
    
    <div class="hero-visual">
        <div class="hero-overlay"></div>
        <img src="{% static 'images/hero-illustration.svg' %}" 
             onerror="this.onerror=null; this.src='https://placehold.co/600x400/f8f9fa/FF5734?text=PeerLearn&font=poppins';" 
             alt="{% trans 'Online Learning Illustration' %}" class="hero-image">
        
        <div class="floating-elements">
            <div class="float-element books">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 8H30V32H10V8Z" fill="#FF5734" fill-opacity="0.2" />
                    <path d="M8 10H28V34H8V10Z" fill="#7C3AED" fill-opacity="0.2" />
                    <path d="M6 12H26V36H6V12Z" fill="#FF5734" fill-opacity="0.2" />
                </svg>
            </div>
            <div class="float-element cap">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 5L32 12L20 19L8 12L20 5Z" fill="#7C3AED" />
                    <path d="M15 22V29L20 32L25 29V22L20 25L15 22Z" fill="#7C3AED" />
                    <rect x="30" y="12" width="2" height="10" fill="#7C3AED" />
                </svg>
            </div>
            <div class="float-element heart">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 26.25L13.05 24.4875C7.2 19.2375 3.5 15.9 3.5 11.875C3.5 8.55 6.18 5.875 9.5 5.875C11.34 5.875 13.11 6.7625 14.25 8.1125C15.39 6.7625 17.16 5.875 19 5.875C22.32 5.875 25 8.55 25 11.875C25 15.9 21.3 19.2375 15.45 24.5L15 26.25Z" fill="#FF5734" fill-opacity="0.8" />
                </svg>
            </div>
            <div class="float-element note">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 5.625C16.5188 5.625 17.75 6.85625 17.75 8.375C17.75 9.89375 16.5188 11.125 15 11.125C13.4812 11.125 12.25 9.89375 12.25 8.375C12.25 6.85625 13.4812 5.625 15 5.625ZM15 20.625C19.3438 20.625 24.25 22.7938 24.25 23.75V25.625H5.75V23.75C5.75 22.7938 10.6562 20.625 15 20.625ZM15 3.125C12.1 3.125 9.75 5.475 9.75 8.375C9.75 11.275 12.1 13.625 15 13.625C17.9 13.625 20.25 11.275 20.25 8.375C20.25 5.475 17.9 3.125 15 3.125ZM15 18.125C10.4938 18.125 3.25 20.3938 3.25 23.75V28.125H26.75V23.75C26.75 20.3938 19.5062 18.125 15 18.125Z" fill="#7C3AED" />
                </svg>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section - Compact Design -->
<section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8">
            <h2 class="text-2xl md:text-3xl font-bold mb-3 text-gray-800 font-heading">{% trans "How PeerLearn Works" %}</h2>
            <p class="text-base text-gray-600 max-w-xl mx-auto">{% trans "Three simple steps to start learning from the best in the industry" %}</p>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            <!-- Step 1 -->
            <div class="bg-white rounded-md shadow-sm overflow-hidden border border-gray-100 hover:border-primary hover:shadow-md transition-all">
                <div class="p-4">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-primary-light rounded-full flex items-center justify-center mr-3">
                            <i data-feather="search" class="h-5 w-5 text-primary"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800">{% trans "1. Find Your Mentor" %}</h3>
                    </div>
                    <p class="text-sm text-gray-600 pl-13">{% trans "Browse through our curated list of industry experts and find someone who aligns with your learning goals." %}</p>
                </div>
            </div>
            
            <!-- Step 2 -->
            <div class="bg-white rounded-md shadow-sm overflow-hidden border border-gray-100 hover:border-primary hover:shadow-md transition-all">
                <div class="p-4">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-primary-light rounded-full flex items-center justify-center mr-3">
                            <i data-feather="calendar" class="h-5 w-5 text-primary"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800">{% trans "2. Book a Session" %}</h3>
                    </div>
                    <p class="text-sm text-gray-600 pl-13">{% trans "Choose a convenient time slot and book a personalized one-on-one session with your selected mentor." %}</p>
                </div>
            </div>
            
            <!-- Step 3 -->
            <div class="bg-white rounded-md shadow-sm overflow-hidden border border-gray-100 hover:border-primary hover:shadow-md transition-all">
                <div class="p-4">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-primary-light rounded-full flex items-center justify-center mr-3">
                            <i data-feather="video" class="h-5 w-5 text-primary"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800">{% trans "3. Learn & Grow" %}</h3>
                    </div>
                    <p class="text-sm text-gray-600 pl-13">{% trans "Join the live video session, collaborate on the interactive whiteboard, and accelerate your learning journey." %}</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Upcoming Sessions with Horizontal Scrolling -->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 font-heading">{% trans "Upcoming Sessions" %}</h2>
            <a href="{% url 'session_list' %}" class="text-sm inline-flex items-center text-primary hover:text-primary-dark">
                {% trans "View All" %}
                <i data-feather="arrow-right" class="ml-1 h-4 w-4"></i>
            </a>
        </div>
        
        <div class="relative session-carousel">
            <button class="absolute -left-2 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full shadow p-1.5 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 hidden sm:block" id="prev-button">
                <i data-feather="chevron-left" class="h-5 w-5 text-gray-600"></i>
            </button>
            
            <div class="carousel-container overflow-x-auto hide-scrollbar pb-4">
                <div class="carousel-track flex gap-3 transition-transform duration-300 ease-out snap-x">
                    {% if upcoming_sessions %}
                        {% for session in upcoming_sessions %}
                            <div class="carousel-item flex-none w-64 sm:w-56 snap-start session-card">
                                <div class="bg-white rounded-md shadow-sm overflow-hidden h-full border border-gray-100 hover:border-primary hover:shadow-md transition-all">
                                    <div class="h-28 bg-gray-100 relative">
                                        {% if session.thumbnail %}
                                            <img src="{{ session.thumbnail.url }}" alt="{{ session.title }}" class="w-full h-full object-cover">
                                        {% else %}
                                            <div class="absolute inset-0 flex items-center justify-center bg-primary-light">
                                                <i data-feather="book-open" class="h-8 w-8 text-primary"></i>
                                            </div>
                                        {% endif %}
                                        {% if session.tags %}
                                            <div class="absolute bottom-0 left-0 bg-primary text-white px-2 py-0.5 text-xs font-medium">
                                                {{ session.tags.split|first|title }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="p-3">
                                        <h3 class="text-base font-bold mb-1.5 text-gray-800 truncate">{{ session.title }}</h3>
                                        <div class="flex items-center mb-1.5">
                                            {% if session.mentor.user.profile_picture %}
                                                <img src="{{ session.mentor.user.profile_picture.url }}" alt="{{ session.mentor.user.get_full_name }}" class="w-6 h-6 rounded-full object-cover mr-1.5">
                                            {% else %}
                                                <div class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold mr-1.5">
                                                    {{ session.mentor.user.first_name|first|upper }}
                                                </div>
                                            {% endif %}
                                            <span class="text-xs text-gray-600 truncate">{{ session.mentor.user.get_full_name }}</span>
                                        </div>
                                        <div class="text-xs text-gray-500 mb-2 flex items-center">
                                            <i data-feather="calendar" class="inline h-3 w-3 mr-1 flex-shrink-0"></i>
                                            <span class="truncate">{{ session.start_time|date:"M j, Y • g:i A" }}</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            {% if session.price > 0 %}
                                                <span class="text-primary text-sm font-medium">₹{{ session.price }}</span>
                                            {% else %}
                                                <span class="text-success text-sm font-medium">{% trans "Free" %}</span>
                                            {% endif %}
                                            <a href="{% url 'session_detail' session.id %}" class="text-xs bg-primary text-white px-2 py-1 rounded">{% trans "Details" %}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <!-- Fallback if no sessions available -->
                        <div class="w-full text-center py-6">
                            <p class="text-gray-500 text-sm">{% trans "No upcoming sessions available at the moment." %}</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <button class="absolute -right-2 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full shadow p-1.5 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 hidden sm:block" id="next-button">
                <i data-feather="chevron-right" class="h-5 w-5 text-gray-600"></i>
            </button>
        </div>
    </div>
</section>

<!-- Live Now Sessions -->
{% if live_sessions %}
<section class="py-10 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center">
                <h2 class="text-2xl font-bold text-gray-800 font-heading">{% trans "Live Now" %}</h2>
                <div class="ml-2 px-2 py-0.5 bg-red-100 text-red-700 rounded-full flex items-center">
                    <span class="h-1.5 w-1.5 bg-red-600 rounded-full mr-1 animate-pulse"></span>
                    <span class="text-xs font-medium">{% trans "LIVE" %}</span>
                </div>
            </div>
            <a href="{% url 'session_list' %}?status=in_progress" class="text-sm inline-flex items-center text-red-600 hover:text-red-700">
                {% trans "View All" %}
                <i data-feather="arrow-right" class="ml-1 h-4 w-4"></i>
            </a>
        </div>
        
        <div class="relative live-session-carousel">            
            <div class="carousel-container overflow-x-auto hide-scrollbar pb-4">
                <div class="carousel-track flex gap-3 transition-transform duration-300 ease-out snap-x">
                    {% for session in live_sessions %}
                        <div class="carousel-item flex-none w-64 sm:w-56 snap-start live-session-card">
                            <div class="bg-white rounded-md shadow-sm overflow-hidden h-full border border-red-300 hover:border-red-500 hover:shadow-md transition-all">
                                <div class="h-28 bg-gray-100 relative">
                                    {% if session.thumbnail %}
                                        <img src="{{ session.thumbnail.url }}" alt="{{ session.title }}" class="w-full h-full object-cover">
                                    {% else %}
                                        <div class="absolute inset-0 flex items-center justify-center bg-red-50">
                                            <i data-feather="video" class="h-8 w-8 text-red-500"></i>
                                        </div>
                                    {% endif %}
                                    <div class="absolute top-2 right-2 bg-red-600 text-white px-2 py-0.5 rounded-full text-xs font-medium flex items-center">
                                        <span class="h-1.5 w-1.5 bg-white rounded-full mr-1 animate-pulse"></span>
                                        {% trans "LIVE" %}
                                    </div>
                                </div>
                                <div class="p-3">
                                    <h3 class="text-base font-bold mb-1.5 text-gray-800 truncate">{{ session.title }}</h3>
                                    <div class="flex items-center mb-1.5">
                                        {% if session.mentor.user.profile_picture %}
                                            <img src="{{ session.mentor.user.profile_picture.url }}" alt="{{ session.mentor.user.get_full_name }}" class="w-6 h-6 rounded-full object-cover mr-1.5">
                                        {% else %}
                                            <div class="w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center text-xs font-bold mr-1.5">
                                                {{ session.mentor.user.first_name|first|upper }}
                                            </div>
                                        {% endif %}
                                        <span class="text-xs text-gray-600 truncate">{{ session.mentor.user.get_full_name }}</span>
                                    </div>
                                    <a href="{% url 'session_room' session.id %}" class="block w-full bg-red-600 hover:bg-red-700 text-white text-center py-1.5 rounded text-sm font-medium mt-2">
                                        {% trans "Join Now" %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Popular Topics -->
{% if popular_topics %}
<section class="py-10 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 font-heading">{% trans "Popular Topics" %}</h2>
            <a href="{% url 'session_list' %}" class="text-sm inline-flex items-center text-primary hover:text-primary-dark">
                {% trans "Browse All" %}
                <i data-feather="arrow-right" class="ml-1 h-4 w-4"></i>
            </a>
        </div>
        
        <div class="relative topics-carousel">
            <div class="carousel-container overflow-x-auto hide-scrollbar pb-4">
                <div class="carousel-track flex flex-wrap gap-2 sm:gap-3">
                    {% for topic, count in popular_topics %}
                        <a href="{% url 'session_list' %}?tag={{ topic }}" class="topic-pill flex-none px-4 py-1.5 bg-gray-100 hover:bg-primary-light text-gray-700 hover:text-primary rounded-full transition-all text-sm whitespace-nowrap">
                            <span class="font-medium">{{ topic|title }}</span>
                            <span class="ml-1.5 bg-white text-primary px-1.5 py-0.5 rounded-full text-xs">{{ count }}</span>
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <!-- Category Quick Filter Buttons -->
        <div class="mt-6 flex flex-wrap gap-2 justify-center">
            <button class="category-filter px-3 py-1.5 bg-primary text-white rounded-md text-sm font-medium">
                {% trans "All" %}
            </button>
            <button class="category-filter px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium">
                {% trans "Programming" %}
            </button>
            <button class="category-filter px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium">
                {% trans "Design" %}
            </button>
            <button class="category-filter px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium">
                {% trans "Business" %}
            </button>
            <button class="category-filter px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium">
                {% trans "Data Science" %}
            </button>
        </div>
    </div>
</section>
{% endif %}
        </div>
    </div>
</section>

<!-- Top Mentors with Horizontal Scrolling -->
<section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 font-heading">{% trans "Meet Our Top Mentors" %}</h2>
            <a href="{% url 'session_list' %}?type=mentors" class="text-sm inline-flex items-center text-primary hover:text-primary-dark">
                {% trans "View All" %}
                <i data-feather="arrow-right" class="ml-1 h-4 w-4"></i>
            </a>
        </div>
        
        <div class="relative mentor-carousel">
            <button class="absolute -left-2 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full shadow p-1.5 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 hidden sm:block" id="mentor-prev-button">
                <i data-feather="chevron-left" class="h-5 w-5 text-gray-600"></i>
            </button>
            
            <div class="carousel-container overflow-x-auto hide-scrollbar pb-4">
                <div class="carousel-track flex gap-3 transition-transform duration-300 ease-out snap-x">
                    {% if featured_mentors %}
                        {% for mentor in featured_mentors %}
                            <div class="carousel-item flex-none w-64 sm:w-56 snap-start mentor-card">
                                <div class="bg-white rounded-md shadow-sm overflow-hidden h-full border border-gray-100 hover:border-primary hover:shadow-md transition-all">
                                    <div class="p-4">
                                        <div class="flex flex-col items-center text-center mb-3">
                                            {% if mentor.user.profile_picture %}
                                                <img src="{{ mentor.user.profile_picture.url }}" alt="{{ mentor.user.get_full_name }}" class="w-20 h-20 rounded-full object-cover mb-2">
                                            {% else %}
                                                <div class="w-20 h-20 rounded-full bg-primary text-white flex items-center justify-center font-bold text-xl mb-2">
                                                    {{ mentor.user.first_name|first|upper }}
                                                </div>
                                            {% endif %}
                                            <h3 class="text-base font-bold text-gray-800">{{ mentor.user.get_full_name }}</h3>
                                            <p class="text-xs text-primary">{{ mentor.expertise|truncatechars:30 }}</p>
                                        </div>
                                        
                                        <div class="flex items-center justify-center mb-2">
                                            <div class="flex text-yellow-400">
                                                {% for i in "12345" %}
                                                    {% if forloop.counter <= mentor.average_rating %}
                                                        <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                                    {% else %}
                                                        <i data-feather="star" class="h-3 w-3"></i>
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                            <span class="ml-1 text-xs text-gray-500">{{ mentor.total_reviews }}</span>
                                        </div>
                                        
                                        <div class="flex items-center justify-center space-x-1 mb-3">
                                            {% with session_count=mentor.session_set.count %}
                                                <span class="px-2 py-0.5 bg-primary-light text-primary rounded-full text-xs">{{ session_count }} {% trans "Sessions" %}</span>
                                            {% endwith %}
                                        </div>
                                        
                                        <a href="{{ mentor.get_absolute_url }}" class="block w-full bg-primary hover:bg-primary-dark text-white text-center py-1.5 rounded text-sm font-medium">
                                            {% trans "View Profile" %}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <!-- Empty state if no mentors -->
                        <div class="w-full text-center py-6">
                            <p class="text-gray-500 text-sm">{% trans "No mentors available at the moment." %}</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <button class="absolute -right-2 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full shadow p-1.5 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 hidden sm:block" id="mentor-next-button">
                <i data-feather="chevron-right" class="h-5 w-5 text-gray-600"></i>
            </button>
        </div>
    </div>
</section>

<!-- Testimonials with Horizontal Scroll -->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 font-heading">{% trans "What Our Learners Say" %}</h2>
            <div class="flex space-x-1">
                <button class="testimonial-prev p-1.5 bg-gray-100 hover:bg-gray-200 rounded-full focus:outline-none">
                    <i data-feather="chevron-left" class="h-4 w-4 text-gray-600"></i>
                </button>
                <button class="testimonial-next p-1.5 bg-gray-100 hover:bg-gray-200 rounded-full focus:outline-none">
                    <i data-feather="chevron-right" class="h-4 w-4 text-gray-600"></i>
                </button>
            </div>
        </div>
        
        <div class="relative testimonial-carousel">
            <div class="carousel-container overflow-x-auto hide-scrollbar pb-4">
                <div class="testimonial-track flex gap-4 snap-x">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-item flex-none w-full md:w-1/2 lg:w-1/3 snap-start">
                        <div class="bg-white rounded-lg shadow-sm p-4 border border-gray-100">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm mr-3">S</div>
                                <div>
                                    <h3 class="font-medium text-gray-800 text-sm">Sanjay Gupta</h3>
                                    <p class="text-gray-500 text-xs">{% trans "Software Engineer" %}</p>
                                </div>
                                <div class="ml-auto flex text-yellow-400">
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                </div>
                            </div>
                            <p class="text-gray-700 text-sm leading-relaxed">{% trans "The 1-on-1 mentoring sessions were game-changing for my career. My mentor provided practical insights that no online course could offer. Within 3 months, I managed to land my dream job." %}</p>
                        </div>
                    </div>
                    
                    <!-- Testimonial 2 -->
                    <div class="testimonial-item flex-none w-full md:w-1/2 lg:w-1/3 snap-start">
                        <div class="bg-white rounded-lg shadow-sm p-4 border border-gray-100">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm mr-3">N</div>
                                <div>
                                    <h3 class="font-medium text-gray-800 text-sm">Neha Sharma</h3>
                                    <p class="text-gray-500 text-xs">{% trans "UX Designer" %}</p>
                                </div>
                                <div class="ml-auto flex text-yellow-400">
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3"></i>
                                </div>
                            </div>
                            <p class="text-gray-700 text-sm leading-relaxed">{% trans "The whiteboard feature was amazing for collaborative design reviews. My mentor helped me improve my portfolio significantly, and I received great feedback in my interviews." %}</p>
                        </div>
                    </div>
                    
                    <!-- Testimonial 3 -->
                    <div class="testimonial-item flex-none w-full md:w-1/2 lg:w-1/3 snap-start">
                        <div class="bg-white rounded-lg shadow-sm p-4 border border-gray-100">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-sm mr-3">V</div>
                                <div>
                                    <h3 class="font-medium text-gray-800 text-sm">Vikram Desai</h3>
                                    <p class="text-gray-500 text-xs">{% trans "Data Analyst" %}</p>
                                </div>
                                <div class="ml-auto flex text-yellow-400">
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                    <i data-feather="star" class="h-3 w-3 fill-current"></i>
                                </div>
                            </div>
                            <p class="text-gray-700 text-sm leading-relaxed">{% trans "I was struggling with complex SQL queries and data visualization. After just 5 sessions with my mentor, I gained the confidence to tackle challenging projects at work. Worth every rupee!" %}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section - More Compact -->
<section class="py-12 bg-gradient-to-r from-primary to-primary-dark text-white">
    <div class="container mx-auto px-4 sm:px-6 text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-4 font-heading">{% trans "Ready to Accelerate Your Learning?" %}</h2>
        <p class="text-base text-white/80 mb-6 max-w-2xl mx-auto">{% trans "Join thousands of learners who are achieving their goals faster with personalized mentorship." %}</p>
        <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4">
            <a href="{% url 'session_list' %}" class="bg-white text-primary px-6 py-2.5 rounded-md font-medium text-sm md:text-base inline-flex items-center justify-center">
                <i data-feather="search" class="h-4 w-4 mr-2"></i>
                {% trans "Find a Mentor" %}
            </a>
            <a href="{% url 'role_selection' %}" class="border border-white text-white px-6 py-2.5 rounded-md font-medium text-sm md:text-base inline-flex items-center justify-center">
                <i data-feather="users" class="h-4 w-4 mr-2"></i>
                {% trans "Become a Mentor" %}
            </a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize all carousel functionality
        function initCarousel(containerSelector, prevSelector, nextSelector) {
            const container = document.querySelector(containerSelector);
            if (!container) return;
            
            const track = container.querySelector('.carousel-track');
            const items = container.querySelectorAll('.carousel-item, .mentor-card, .live-session-card, .testimonial-item');
            const prevBtn = container.querySelector(prevSelector) || document.querySelector(prevSelector);
            const nextBtn = container.querySelector(nextSelector) || document.querySelector(nextSelector);
            
            if (!track || !items.length) return;
            
            let currentIndex = 0;
            // Responsive item width calculation
            const computeItemWidth = () => {
                const firstItem = items[0];
                const itemStyle = window.getComputedStyle(firstItem);
                const marginRight = parseInt(itemStyle.marginRight) || 0;
                const marginLeft = parseInt(itemStyle.marginLeft) || 0;
                return firstItem.offsetWidth + marginRight + marginLeft;
            };
            
            let itemWidth = computeItemWidth();
            
            // Responsive visible items calculation
            const computeVisibleItems = () => {
                return Math.max(1, Math.floor(container.offsetWidth / itemWidth));
            };
            
            let visibleItems = computeVisibleItems();
            let maxIndex = Math.max(0, items.length - visibleItems);
            
            function updateCarousel() {
                track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
                
                // Update button states (optional)
                if (prevBtn) prevBtn.classList.toggle('opacity-50', currentIndex <= 0);
                if (nextBtn) nextBtn.classList.toggle('opacity-50', currentIndex >= maxIndex);
            }
            
            // Handle window resize
            window.addEventListener('resize', () => {
                itemWidth = computeItemWidth();
                visibleItems = computeVisibleItems();
                maxIndex = Math.max(0, items.length - visibleItems);
                
                // Reset position if needed
                if (currentIndex > maxIndex) {
                    currentIndex = maxIndex;
                }
                updateCarousel();
            });
            
            // Add click handlers
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    if (currentIndex > 0) {
                        currentIndex--;
                        updateCarousel();
                    }
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    if (currentIndex < maxIndex) {
                        currentIndex++;
                        updateCarousel();
                    }
                });
            }
            
            // Initial update
            updateCarousel();
        }
        
        // Initialize all carousels
        initCarousel('.session-carousel', '#prev-button', '#next-button');
        initCarousel('.live-session-carousel', null, null);
        initCarousel('.mentor-carousel', '#mentor-prev-button', '#mentor-next-button');
        initCarousel('.testimonial-carousel', '.testimonial-prev', '.testimonial-next');
        
        // Initialize category filter buttons
        const categoryButtons = document.querySelectorAll('.category-filter');
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                categoryButtons.forEach(btn => {
                    btn.classList.remove('bg-primary', 'text-white');
                    btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                });
                
                // Add active class to clicked button
                button.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                button.classList.add('bg-primary', 'text-white');
                
                // This is where you'd filter content based on the selected category
                // For now, we're just styling the buttons
            });
        });
        
        // Update feather icons after DOM modification
        feather.replace();
    });
</script>

<style>
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    
    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    
    /* Smooth scrolling for carousels */
    .carousel-track {
        scroll-behavior: smooth;
    }
    
    /* Mobile scrolling improvements */
    @media (max-width: 640px) {
        .carousel-container {
            scroll-snap-type: x mandatory;
            padding-bottom: 1rem;
        }
        
        .carousel-item, .mentor-card, .testimonial-item, .live-session-card {
            scroll-snap-align: start;
        }
    }
</style>
{% endblock %}
